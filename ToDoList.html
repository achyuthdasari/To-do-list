<!DOCTYPE html>
<html>
    <head>
        <title>ToDoList</title>
        <script src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
        <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
       
    </head>

    <body> 
        
        <div id="list" style="width:80%;float:left;"></div>

        <script type="text/babel">
            class ToDoList extends React.Component{

                constructor(props) {
                    super(props);
                    this.state= { 
                        tasks:["Task 1","Task 2","Task 3"],
                        input:"",
                        upd:false,
                        tid:""
                    }
                }

                render(){
                    if (this.state.upd){
                        var butn =<button onClick={this.updTask}> Update Task</button>
                    }
                    else{
                        var butn =<button onClick={this.addTask}> Add Task</button>
                    }
                    return(
                        <div id="app">
                            <h1>Tasks</h1>
                            <ul id="todolst">
                                {this.state.tasks.map((task,i)=>
                                    <li key={i}>
                                        {task} {<button id={i} onClick={() => this.deleteTask(i)}> delete </button>} {<button id={i} onClick={() => this.updateTask(i)}> update </button>}
                                    </li>
                                )}

                            </ul>
                            <label for= "inpt"> Task </label>
                            <input id ="inpt" onChange={this.updateinpt} value={this.state.input} type="text" placeholder="Enter the task"></input><br/><br/>
                            
                            {butn}
                            
                        </div>
                    );
                }

                updateinpt = (event) =>{
                    this.setState({
                        input: event.target.value
                    })
                }

                addTask =() =>{
                    this.setState(state=>({
                        tasks: [...state.tasks,state.input],
                        input:""
                    }))                   
                }

                updTask =() =>{
                    var tsks = this.state.tasks;
                    tsks[this.state.tid]=this.state.input

                    this.setState(state=>({
                        tasks:tsks ,
                        input:"",
                        upd:false,
                        id:""
                    }))                   
                }

                deleteTask = (id) =>{
                    var lst = this.state.tasks 
                    // console.log(id)
                    console.log("exec")
                    console.log(id)
                    console.log(lst)
                    lst.splice(id,1)
                    this.setState({
                        tasks:lst
                    })
                }


                updateTask = (id) =>{
                    var lst = this.state.tasks 
                    // console.log(id)
                    console.log("exec")
                    console.log(id)
                    console.log(lst)

                    // lst.splice(id,1)
                    this.setState({
                        tasks:lst,
                        input:lst[id],
                        upd:true,
                        tid:id
                    })
                }

            }

            ReactDOM.render(<ToDoList/>,document.querySelector("#list"))

        </script>

    </body>
</html>
